{"version":3,"sources":["utils/store.js","utils/history.js","components/TopBar.js","utils/requests.js","pages/homepage/HomePage.js","pages/catpage/CatPage.js","App.js","utils/reportWebVitals.js","index.js"],"names":["PhotosStore","photos","this","photosStore","decorate","observable","setPhotos","action","createBrowserHistory","withRouter","pathname","location","Navbar","bg","expand","variant","className","Brand","href","Toggle","aria-controls","Collapse","id","Nav","Link","active","axios","require","APIURL","getPhotos","limit","page","get","headers","_","filter","find","isEmpty","remove","countBy","HomePage","handlePageClick","selectedPage","selected","setState","pagination","state","currentPage","getAllFav","a","data","getAllFavourites","method","url","favourites","getSpecificFavourite","fav_id","then","res","getAllVotes","votes","positive","vote","value","negative","vote_up","length","vote_down","console","log","getAllPhotos","response","parseInt","total","handleFavSubmit","event","fav","preventDefault","post","localStorage","setItem","vote_state","handleUnFavSubmit","favourite_id","delete","removeItem","handleVoteSubmit","voteReq","voteReqObj","sub_id","push","visible","prevProps","prevState","photoList","map","p","image_id","voteUp","voteDown","voteObj","totalVoteUp","totalVoteDown","is_fav","src","type","onClick","e","w-100","pageCount","Math","ceil","previousLabel","nextLabel","onPageChange","containerClassName","previousLinkClassName","nextLinkClassName","disabledClassName","activeClassName","React","Component","observer","CatPage","props","file","status","onFormSubmit","bind","onChange","formData","FormData","append","alert","history","catch","error","target","files","onSubmit","name","App","exact","path","component","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.ec9354ea.chunk.js","sourcesContent":["import { observable, action, decorate } from \"mobx\";\r\nclass PhotosStore {\r\n  photos = [];\r\n  setPhotos(photos) {\r\n    this.photos = photos;\r\n  }\r\n}\r\nPhotosStore = decorate(PhotosStore, {\r\n  photos: observable,\r\n  setPhotos: action\r\n});\r\nconst photosStore = new PhotosStore();\r\nexport { photosStore };","import { createBrowserHistory } from 'history';\r\n\r\nexport default createBrowserHistory();","import React from \"react\";\r\nimport Navbar from \"react-bootstrap/Navbar\";\r\nimport Nav from \"react-bootstrap/Nav\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport \"../assets/style/App.css\";\r\n\r\nfunction TopBar({ location }) {\r\n  const { pathname } = location;\r\n  return (\r\n    <Navbar bg=\"primary\" expand=\"lg\" variant=\"dark\" className=\"card-shadow\">\r\n      <Navbar.Brand href=\"/\">CAT API</Navbar.Brand>\r\n      <Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\r\n      <Navbar.Collapse id=\"basic-navbar-nav\">\r\n        <Nav className=\"mr-auto\">\r\n          <Nav.Link href=\"/upload\" active={pathname === \"/\"}>\r\n            Upload\r\n          </Nav.Link>\r\n        </Nav>\r\n      </Navbar.Collapse>\r\n    </Navbar>\r\n  );\r\n}\r\nexport default withRouter(TopBar);\r\n","const axios = require(\"axios\");\r\nexport const APIURL = \"https://api.thecatapi.com\";\r\nexport const getPhotos = (limit, page) =>\r\n axios.get(`${APIURL}/v1/images?limit=${limit}&page=${page}&order=ASC`, {\r\n  headers: {\r\n    \"Content-Type\": \"multipart/form-data\",\r\n    \"x-api-key\": \"98de9fca-14cc-430d-a65f-e4930c214699\"\r\n  }\r\n})\r\nexport const getVotes = () => axios.get(`${APIURL}/v1/votes`, {\r\n  headers: {\r\n    \"Content-Type\": \"application/json\",\r\n    \"x-api-key\": \"98de9fca-14cc-430d-a65f-e4930c214699\"\r\n  }\r\n})\r\n\r\nexport const addPhoto = data =>\r\n  axios({\r\n    method: \"post\",\r\n    url: `${APIURL}/v1/images/upload`,\r\n    data,\r\n    headers: {\r\n      \"Content-Type\": \"multipart/form-data\",\r\n      \"x-api-key\": \"98de9fca-14cc-430d-a65f-e4930c214699\"\r\n    }\r\n  });\r\nexport const editPhoto = data =>\r\n  axios({\r\n    method: \"put\",\r\n    url: `${APIURL}/photos/edit`,\r\n    data,\r\n    headers: {\r\n      \"Content-Type\": \"multipart/form-data\",\r\n      \"x-api-key\": \"98de9fca-14cc-430d-a65f-e4930c214699\"\r\n    }\r\n  });\r\n\r\nexport const favourite = data =>\r\n  axios({\r\n    method: \"post\",\r\n    url: `${APIURL}/v1/favourite`,\r\n    data,\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      \"x-api-key\": \"98de9fca-14cc-430d-a65f-e4930c214699\"\r\n    }\r\n  });\r\n\r\nexport const unfavourite = data =>\r\n  axios({\r\n    method: \"post\",\r\n    url: `${APIURL}/v1/unfavourite`,\r\n    data,\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      \"x-api-key\": \"98de9fca-14cc-430d-a65f-e4930c214699\"\r\n    }\r\n  });\r\nexport const deletePhoto = id => axios.delete(`${APIURL}/photos/delete/${id}`);\r\n\r\nexport const getAllFavourites = data =>\r\n  axios({\r\n    method: \"get\",\r\n    url: `${APIURL}/v1/favourites`,\r\n    data,\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      \"x-api-key\": \"98de9fca-14cc-430d-a65f-e4930c214699\"\r\n    }\r\n  });","import React from \"react\";\r\nimport \"../../assets/style/App.css\";\r\nimport { observer } from \"mobx-react\";\r\nimport axios from 'axios';\r\nimport { getPhotos, getVotes, getAllFavourites } from \"../../utils/requests\";\r\nimport ReactPaginate from \"react-paginate\";\r\nimport filter from 'lodash/filter';\r\nimport find from 'lodash/find';\r\nimport get from 'lodash/get';\r\nimport isEmpty from 'lodash/isEmpty';\r\nimport remove from 'lodash/remove';\r\nimport countBy from 'lodash/countBy';\r\n\r\nconst _ = {filter, find, get, isEmpty, remove, countBy};\r\n\r\nconst PER_PAGE = 8;\r\n\r\nclass HomePage extends React.Component {\r\n\r\n  constructor() {\r\n    super()\r\n    this.state = {\r\n      photos: [],\r\n      id: '',\r\n      sub_id: '',\r\n      votes: '',\r\n      vote_up: '',\r\n      vote_down: '',\r\n      vote_state: null,\r\n      vote: '',\r\n      visible: false,\r\n      push: null,\r\n      favourites:[],\r\n      pagination: {\r\n        total: 0,\r\n        limit : PER_PAGE,\r\n        currentPage: 0        \r\n      }\r\n    }\r\n  }\r\n\r\n  handlePageClick = ({ selected: selectedPage }) => {\r\n      // setCurrentPage(selectedPage);\r\n      this.setState({pagination : {...this.state.pagination, currentPage:selectedPage}});\r\n  }\r\n\r\n  getAllFav = async () => {\r\n    const favourites = await getAllFavourites();\r\n    this.setState({\r\n      favourites: favourites.data\r\n    });\r\n  };\r\n\r\n\r\n  getSpecificFavourite = (fav_id) => {\r\n    axios.get(`https://api.thecatapi.com/v1/favourites/${fav_id}`, \r\n    { \r\n      headers: {\r\n         \"Content-Type\": \"application/json\",\r\n          \"x-api-key\": \"98de9fca-14cc-430d-a65f-e4930c214699\"\r\n         }\r\n         }\r\n    )\r\n      .then(res => {\r\n        \r\n        this.setState({\r\n          favourites : [...this.state.favourites, res.data]\r\n        });\r\n      });\r\n  }\r\n\r\n  getAllVotes = async () => {\r\n    const votes = await getVotes()\r\n    const positive = votes.data.filter((vote) => {\r\n      return vote.value === 1\r\n    })\r\n\r\n    const negative = votes.data.filter((vote) => {\r\n      return vote.value === 0\r\n    })\r\n\r\n    this.setState({\r\n      vote_up: positive.length,\r\n      vote_down: negative.length\r\n    })\r\n\r\n    console.log(\"votes.data =====> \", votes.data);\r\n\r\n    this.setState({\r\n      votes: votes.data\r\n    })\r\n  };\r\n\r\n  getAllPhotos = async (page) => {\r\n  \r\n    const response = await getPhotos(PER_PAGE, page);\r\n\r\n    console.log(\"response : \", response);\r\n\r\n    if(parseInt(_.get(response, \"headers.pagination-page\")) === 0){\r\n      const pagination = {\r\n        total: parseInt(_.get(response, \"headers.pagination-count\", 0)),\r\n        limit: parseInt(_.get(response, \"headers.pagination-limit\", 0)),\r\n        currentPage: parseInt(_.get(response, \"headers.pagination-page\", 0)),\r\n      }\r\n  \r\n      this.state.pagination = {...pagination};\r\n    }\r\n    \r\n    \r\n    this.setState({\r\n      photos: response.data\r\n    });\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.setState({\r\n      push: 1\r\n    });\r\n\r\n    \r\n    this.getAllFav();\r\n    this.getAllPhotos(0);\r\n    this.getAllVotes();\r\n  };\r\n\r\n  componentDidUpdate(prevProps, prevState){\r\n    if(prevState.favourites !== this.state.favourites) {\r\n      this.setState();\r\n    }\r\n\r\n    console.log(\"pagination ====> \",prevState.pagination, this.state.pagination);\r\n\r\n    if(prevState.pagination !== this.state.pagination) {\r\n      const page = _.get(this.state.pagination, \"currentPage\", 1);\r\n      this.getAllPhotos(page);\r\n    }\r\n  }\r\n\r\n  handleFavSubmit = async (event, fav) => {\r\n    event.preventDefault();\r\n\r\n    await axios.post(`https://api.thecatapi.com/v1/favourites`, fav, \r\n    {\r\n       headers: { \"Content-Type\": \"application/json\",\r\n        \"x-api-key\": \"98de9fca-14cc-430d-a65f-e4930c214699\"\r\n       } }\r\n    )\r\n      .then(res => {\r\n        if(_.get(res, \"data.message\", \"FAIL\") === \"SUCCESS\") {\r\n          this.getSpecificFavourite(res.data.id);\r\n        }\r\n\r\n        localStorage.setItem('favId', res.data.id)\r\n        this.setState({\r\n          vote_state: 1,\r\n          vote: this.state.vote\r\n        })\r\n      })\r\n  }\r\n\r\n  handleUnFavSubmit = (event, fav_id) => {\r\n    event.preventDefault();\r\n    // const favourite_id = localStorage.getItem('favId');\r\n    const favourite_id = fav_id;\r\n\r\n    axios.delete(`https://api.thecatapi.com/v1/favourites/${favourite_id}`, { \r\n      headers: { \r\n        \"Content-Type\": \"application/json\",\r\n         \"x-api-key\": \"98de9fca-14cc-430d-a65f-e4930c214699\" \r\n        } \r\n      }\r\n    )\r\n      .then(res => {\r\n        localStorage.removeItem('favId');\r\n        const removeFav = _.remove(this.state.favourites, {\"id\" : favourite_id});\r\n        this.setState({\r\n          vote_state: null,\r\n          favourites : [...this.state.favourites]\r\n        });\r\n      });\r\n  }\r\n\r\n  handleVoteSubmit = (event, voteReq) => {\r\n    event.preventDefault();\r\n\r\n    let voteReqObj = voteReq;\r\n    if(_.isEmpty(voteReq.sub_id)) {\r\n      delete voteReq.sub_id;\r\n      voteReqObj = voteReq;\r\n    }\r\n    \r\n    axios.post(`https://api.thecatapi.com/v1/votes`, voteReqObj,\r\n     {\r\n        headers: { \r\n          \"Content-Type\": \"application/json\",\r\n           \"x-api-key\": \"98de9fca-14cc-430d-a65f-e4930c214699\"\r\n           } \r\n          }\r\n    )\r\n      .then(res => {\r\n        this.getAllVotes();\r\n        this.setState({\r\n          push: 1\r\n        });\r\n      });\r\n  }\r\n\r\n  render() {\r\n\r\n    const { pagination } = this.state;\r\n    console.log(\"this.state.photos =====> \", this.state.photos);\r\n\r\n    const photoList = this.state.photos.map(p => {\r\n      let fav = {\r\n        image_id: p.id\r\n      }\r\n\r\n      if(!_.isEmpty(p.sub_id)) {\r\n        fav = {\r\n          ...fav,\r\n          sub_id: p.sub_id\r\n        };\r\n      }\r\n\r\n      const voteUp = {\r\n        image_id: p.id,\r\n        sub_id: p.sub_id,\r\n        value: true\r\n      }\r\n\r\n      const voteDown = {\r\n        image_id: p.id,\r\n        sub_id: p.sub_id,\r\n        value: false\r\n      }\r\n\r\n      const voteObj = {};\r\n      voteObj.image_id= p.id;\r\n      \r\n      if(!_.isEmpty(p.sub_id)) {\r\n        voteObj.sub_id= p.sub_id;\r\n      }\r\n\r\n      const totalVoteUp = _.filter(this.state.votes, {...voteObj, value: 1});\r\n      const totalVoteDown = _.filter(this.state.votes, {...voteObj, value: 0});\r\n\r\n      const is_fav = _.find(this.state.favourites, {...fav});\r\n\r\n      return (\r\n        <div className=\"col-md-6 col-xl-3 mt-5\" key={p.id}>\r\n          <div className=\"cat-card card-shadow\">\r\n            <div className=\"cat-card-top\">\r\n            {/* <small>{p.id}-{p.sub_id}</small> */}\r\n              <img className=\"cat-img\" key={p.id} src={p.url} id=\"img_wrap\" />\r\n              \r\n              {is_fav ?  \r\n                <button type=\"button\" className=\"fav-btn btn btn-primary btn-lg\"\r\n                 onClick={(e) => this.handleUnFavSubmit(e, is_fav.id)}>\r\n                  <i className=\"fa fa-heart\"></i>\r\n                </button>                        \r\n              : \r\n                <button type=\"button\" className=\"fav-btn btn btn-primary btn-lg\" \r\n                onClick={(e) => this.handleFavSubmit(e, fav)}>\r\n                  <i className=\"fa fa-heart un-fa-heart\"></i>\r\n                </button>                        \r\n              }\r\n            </div>\r\n              \r\n            <div className=\"row mx-0\">\r\n              <div className=\"col\">\r\n                <p className=\"mb-2\">\r\n                  <span className=\"total-votes totla-up-votes\">\r\n                    {totalVoteUp.length}\r\n                  </span>\r\n                </p>\r\n                <button type=\"button\" className=\"btn btn-success btn-lg w-100 vote-up\" \r\n                onClick={(e) => this.handleVoteSubmit(e, voteUp)}>Vote Up</button>\r\n              </div>\r\n              <div className=\"col\">\r\n                <p className=\"mb-2\">\r\n                  <span className=\"total-votes totla-down-votes\">\r\n                    {totalVoteDown.length}\r\n                  </span>\r\n                </p>\r\n                <button type=\"button\" className=\"btn btn-danger btn-lg w-100\" w-100 \r\n                onClick={(e) => this.handleVoteSubmit(e, voteDown)}>Vote Down </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )\r\n    });\r\n\r\n    const offset = pagination.currentPage * PER_PAGE;\r\n\r\n    const pageCount = Math.ceil(pagination.total / PER_PAGE);\r\n\r\n    return (\r\n      <div className=\"container\">\r\n        <div className=\"row\">\r\n          {photoList}\r\n        </div>\r\n        <div className=\"row mx-0 pagination-wrapper\">\r\n              <div className=\"col\">\r\n                {\r\n                  !_.isEmpty(photoList) && \r\n                  <ReactPaginate\r\n                    previousLabel={\"← Previous\"}\r\n                    nextLabel={\"Next →\"}\r\n                    pageCount={pageCount}\r\n                    onPageChange={this.handlePageClick}\r\n                    containerClassName={\"pagination\"}\r\n                    previousLinkClassName={\"pagination__link\"}\r\n                    nextLinkClassName={\"pagination__link\"}\r\n                    disabledClassName={\"pagination__link--disabled\"}\r\n                    activeClassName={\"pagination__link--active\"}\r\n                  />\r\n                }\r\n              </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n}\r\nexport default observer(HomePage);","import React from 'react'\r\nimport history from '../../utils/history'\r\n\r\nconst axios = require(\"axios\");\r\n\r\nclass CatPage extends React.Component {\r\n\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      sub_id: '',\r\n      file: '',\r\n      status: null\r\n    };\r\n    this.onFormSubmit = this.onFormSubmit.bind(this);\r\n    this.onChange = this.onChange.bind(this);\r\n  }\r\n\r\n  onFormSubmit(e) {\r\n    e.preventDefault();\r\n    const formData = new FormData();\r\n    formData.append('sub_id', this.state.sub_id);\r\n    formData.append('file', this.state.file);\r\n    const config = {\r\n      headers: { \r\n        \"Content-Type\": \"multipart/form-data\",\r\n         \"x-api-key\": \"98de9fca-14cc-430d-a65f-e4930c214699\"\r\n         }\r\n    };\r\n    axios.post(\"https://api.thecatapi.com/v1/images/upload\", formData, config)\r\n      .then((response) => {\r\n        alert(\"The file is successfully uploaded\");\r\n        this.setState({\r\n          status: 'success'\r\n        })\r\n        if (response) {\r\n          history.push('/')\r\n        }\r\n      }).catch((error) => {\r\n        console.log('error', error)\r\n      });\r\n  }\r\n  onChange(e) {\r\n    this.setState({ file: e.target.files[0] });\r\n  }\r\n\r\n  render() {\r\n\r\n    console.log('state vote', this.props)\r\n    return (\r\n      <div className=\"container upload-panel\">\r\n        <div className=\"card-shadow mt-5 p-4\">\r\n          <form onSubmit={this.onFormSubmit}>\r\n            <h1>Upload Your Cat Image</h1>\r\n            <div className=\"form-group text-left my-4\">\r\n              <label>Sub Id</label>\r\n              <input type=\"sub_id\" className=\"form-control\" value={this.state.sub_id} \r\n              onChange={(e) => this.setState({ sub_id: e.target.value })} />\r\n            </div>\r\n            <div className=\"form-group text-left my-4\">\r\n              <label>Image</label>\r\n              <input type=\"file\" className=\"form-control btn mt-1 p-0\" \r\n              id=\"exampleInputPassword1\" name=\"file\" onChange={this.onChange} />\r\n            </div>\r\n            <button type=\"submit\" className=\"btn btn-primary btn-lg btn-block my-2\">Submit</button>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default CatPage","import React from \"react\";\r\nimport { Router, Route } from \"react-router-dom\";\r\nimport { photosStore } from \"./utils/store\";\r\nimport history from './utils/history'\r\nimport TopBar from \"./components/TopBar\";\r\nimport HomePage from \"./pages/homepage/HomePage\";\r\nimport CatPage from \"./pages/catpage/CatPage\";\r\n\r\nfunction App() {\r\n  return (\r\n    <div className=\"App\">\r\n      <Router history={history}>\r\n        <TopBar />\r\n        <Route\r\n          exact\r\n          path=\"/\"\r\n          component={props => (\r\n            <HomePage {...props} photosStore={photosStore} />\r\n          )}\r\n        />\r\n        <Route\r\n          path=\"/upload\"\r\n          component={props => (\r\n            <CatPage {...props} photosStore={photosStore} />\r\n          )}\r\n        />\r\n      </Router>\r\n    </div>\r\n  );\r\n}\r\nexport default App;","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './assets/style/index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './utils/reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}